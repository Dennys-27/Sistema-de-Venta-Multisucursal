--LISTAR TODAS LOS REGISTROS POR SUCURSAL

CREATE PROCEDURE SP_L_COMPANIA_01
AS
BEGIN 
	SELECT * FROM [dbo].[TM_COMPANIA]
	WHERE
	EST=1
END

-- MODIFICAR SP
--SP_HELPTEXT SP_LCOMPANIA_01
 
-- EJECUTAR SP
--EXEC SP_L_COMPANIA_01 


-- OBTENER REGISTRO POR ID
CREATE PROCEDURE SP_L_COMPANIA_02
@COM_ID INT
AS
BEGIN 
	SELECT * FROM [dbo].[TM_COMPANIA]
	WHERE
	COM_ID = @COM_ID
END


-- ELIMINAR REGISTRO 
CREATE PROCEDURE SP_D_COMPANIA_01
@COM_ID INT
AS
BEGIN 
	UPDATE [dbo].[TM_COMPANIA]
	SET
		EST = 0
	WHERE
		COM_ID = @COM_ID
END


-- INSERTAR REGISTRO
CREATE PROCEDURE SP_I_COMPANIA_01
@COM_NOM VARCHAR(150)
AS
BEGIN 
	INSERT INTO [dbo].[TM_COMPANIA]
	(COM_NOM,FECH_CREA,EST)
	VALUES
	(@COM_NOM,GETDATE(),1)
END


-- ACTUALIZAR NUEVO REGISTRO
CREATE PROCEDURE SP_U_COMPANIA_01
@COM_ID INT,
@COM_NOM VARCHAR(150)
AS
BEGIN 
	UPDATE TM_COMPANIA
	SET
		COM_NOM = @COM_NOM
	WHERE
		COM_ID = @COM_ID
END


SELECT * FROM TM_COMPANIA